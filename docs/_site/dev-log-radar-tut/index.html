<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"> <title>Radars as simple as 1,2,3 &#8211; Northern Spirits</title> <meta name="description" content="Setting up a basic radar system in Unity is as simple as 1, 2, 3."> <meta name="keywords" content="Radar, Unity3d, Game Dev, Dev Log"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="halve.png"> <meta name="twitter:title" content="Radars as simple as 1,2,3"> <meta name="twitter:description" content="Setting up a basic radar system in Unity is as simple as 1, 2, 3."> <meta name="twitter:site" content="@SpiritsBot150"> <meta name="twitter:creator" content="@SpiritsBot150"> <!-- Open Graph --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="Radars as simple as 1,2,3"> <meta property="og:description" content="Setting up a basic radar system in Unity is as simple as 1, 2, 3."> <meta property="og:url" content="http://localhost:4000/dev-log-radar-tut/"> <meta property="og:site_name" content="Northern Spirits"> <meta property="og:image" content="http://localhost:4000/images/halve.png"> <link rel="canonical" href="http://localhost:4000/dev-log-radar-tut/"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Feed --> <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Northern Spirits" /> <!-- Favicons --> <link rel="shortcut icon" type="image/png" href="http://localhost:4000/favicon.png" /> <link rel="shortcut icon" href="http://localhost:4000/favicon.ico" /> <!-- CSS --> <link rel="stylesheet" type="text/css" href="http://localhost:4000/assets/css/main.css"> <!-- Left Block Image for Posts --> <style type="text/css"> #posts.inner-post-page .block-left {background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(http://localhost:4000/images/ScreenCap/Screenshot_03.png) no-repeat;background-size: cover;} </style> <!-- Left Block Images for Home and Pages --> <style type="text/css"> #posts .block-left {background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(http://localhost:4000/images/ScreenCap/Screenshot_05.png) no-repeat;background-size: cover, cover;} .block-left {background: linear-gradient(rgba(44,45,51,0.9), rgba(44,45,51,0.9)), url(http://localhost:4000/images/ScreenCap/Screenshot_01.png) no-repeat;background-size: cover;} </style> </head> <body id="posts" class="inner-post-page"> <div class="block-left"> <div class="content"> <a href="http://localhost:4000" class="logo"><img src="http://localhost:4000/images/halve.png"></a> <div class="post-title-section"> <div class="section-line">Posts <em>/</em></div> <h1 class="section-title">Radars as simple as 1,2,3 </h1> <ul class="tags"> <li><a href="http://localhost:4000/tags#Radar">Radar</a></li> <li><a href="http://localhost:4000/tags#Unity3d">Unity3d</a></li> <li><a href="http://localhost:4000/tags#Game Dev">Game Dev</a></li> <li><a href="http://localhost:4000/tags#Dev Log">Dev Log</a></li> </ul> <div class="section-line reverse"><a href="http://localhost:4000/posts">Back to posts</a> <em>/</em></div> </div> </div> </div> <div class="block-right"> <div class="share-buttons"> <a href="https://twitter.com/intent/tweet?text=http://localhost:4000/dev-log-radar-tut/" class="btn btn_twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a> <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/dev-log-radar-tut/" class="btn btn_facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a> <a href="https://plus.google.com/share?url=http://localhost:4000/dev-log-radar-tut/" class="btn btn_google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a> </div> <a href="../posts.html" title="posts" class="posts-menu-icon"></a> <a title="projects" class="projects-menu-icon"> <span></span> </a> <div class="inner-post content"> <div class="date-highlight">21 Apr 2017</div> <p>Setting up a basic radar system in Unity is as simple as 1, 2, 3.</p> <p>For Northern Spirits, we’ve set up a simple radar/mini map system which allows players to find the hidden gem pieces and other objects of interest. For this setup, we used a secondary camera, a new layer, and Unity’s UI system. For the purposes of this tutorial, we have a simple scene setup with some spheres and a player.</p> <figure> <img src="http://localhost:4000/images/posts/radar/1_simple_scene-min.png" alt="SimpleScene" /> <figcaption>A simple scene with a character and some spheres</figcaption> </figure> <ol> <li><a href="#1-setting-up-the-radar-icons">Setting up the radar icons</a></li> <li><a href="#2-the-radar-camera">The Radar Camera</a></li> <li><a href="#3-radar-ui">The Radar UI</a></li> </ol> <hr /> <h2 id="1-setting-up-the-radar-icons">1. Setting up the radar icons</h2> <p>On each object that you would like to display in your radar (the player, cave entrances, inns, etc.) create a child object(we’ve named them RadarIcon) and give it a sprite renderer component. Change the sprite to an icon representing your super special object!</p> <p><img src="http://localhost:4000/images/posts/radar/2_radar-icon-settings-min.png" alt="RadarSettings" /></p> <p>Make sure you rotate your sprites <strong>90 degrees on the X-axis</strong>. This will allow the sprites to be seen by the top-down camera that we will create for our radar.</p> <p><img src="http://localhost:4000/images/posts/radar/3_radar-icons-scene-view-min.png" alt="SceneView" /></p> <blockquote> <p>Now you might be thinking, I can see the sprites in the game view, and it looks awful!</p> </blockquote> <p>Here come layers to the rescue! Layers control which objects can interact with which objects. You can use layers to control which objects can collide with each other, control lighting and control which objects are visible to which camera.</p> <p>Create a new layer, we’ve called our’s <strong>Radar</strong>. And you’ve guessed it, change all your radar icons to be on the <strong>Radar layer</strong>.</p> <p>Now that all the radar icons are on the same layer, we can tell our main camera not to render them. Select your main camera and in the inspector in the drop down menu for <strong>culling mask uncheck the radar layer</strong>. And like magic, the sprites have vanished.</p> <p><img src="http://localhost:4000/images/posts/radar/4_layers.gif" alt="LayerMagic" /></p> <p><img src="http://localhost:4000/images/posts/radar/5_layer_result-min.png" alt="ResultsOfUsingLayers" /></p> <hr /> <h2 id="2-the-radar-camera">2. The Radar camera</h2> <p>Create a new camera object (Radar camera). Rotate the camera <strong>90 degrees on the x-axis</strong> so it is looking downwards and <strong>move it upwards(y-axis)</strong>.</p> <p><img src="http://localhost:4000/images/posts/radar/6_camera_settings-min.png" alt="radarCameraSettings" class="align-right" /></p> <p><strong>Camera settings:</strong></p> <ul> <li><strong>Clear flags:</strong> Solid color</li> <li><strong>Background color:</strong> Fully transparent Colour!(zero alpha!)</li> <li><strong>Culling Mask:</strong> Radar layer</li> <li><strong>Projection:</strong> Orthographic</li> <li><strong>Size:</strong> This will depend on the size of your game. Consider this the radius of your radar.</li> </ul> <p>Ok, great but it’s not much of a radar if it doesn’t move with the player. In order to get it to respond to the player’s movements you could</p> <ol> <li>Make the camera a child of the player game object or</li> <li>Create a script that moves the camera according to the player’s position.</li> </ol> <p>We went for option 2 as we didn’t want the player’s rotation to affect the camera’s viewpoint and it gave us finer control( like movement smoothness).</p> <figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>

<span class="na">[RequireComponent(typeof(Camera))]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">CameraFollower2D</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="n">Transform</span> <span class="n">target</span><span class="p">;</span><span class="c1">// object the camera will follow
</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">dampTime</span> <span class="p">=</span> <span class="m">0.1f</span><span class="p">;</span> <span class="c1">// movement damping
</span>    <span class="k">public</span> <span class="kt">float</span> <span class="n">cameraHeight</span><span class="p">;</span> <span class="c1">// height of camera
</span>    <span class="k">public</span> <span class="n">Vector3</span> <span class="n">offset</span><span class="p">;</span> <span class="c1">// offsetting the position if necessary
</span>
    <span class="n">Vector3</span> <span class="n">destinationPosition</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">zero</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">interpVel</span><span class="p">;</span>
    <span class="k">new</span> <span class="n">Transform</span> <span class="n">transform</span><span class="p">;</span>
    <span class="n">Camera</span> <span class="n">cam</span><span class="p">;</span>

    <span class="k">void</span> <span class="nf">Awake</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">target</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
            <span class="n">target</span> <span class="p">=</span> <span class="n">GameObject</span><span class="p">.</span><span class="nf">FindGameObjectWithTag</span><span class="p">(</span><span class="s">"Player"</span><span class="p">).</span><span class="n">transform</span><span class="p">;</span>

        <span class="n">transform</span> <span class="p">=</span> <span class="k">base</span><span class="p">.</span><span class="n">transform</span><span class="p">;</span> <span class="c1">// caching the camera's transform
</span>        <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">target</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">;</span> <span class="c1">// setting our transform position
</span>        <span class="n">cam</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Camera</span><span class="p">&gt;()</span> <span class="p">;</span>

    <span class="p">}</span>

    <span class="c1">// Update is called once per frame
</span>    <span class="k">void</span> <span class="nf">LateUpdate</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">target</span><span class="p">)</span>
        <span class="p">{</span>
           <span class="c1">//we want to calculate the direction only in two axis(x and z).
</span>            <span class="n">Vector3</span> <span class="n">posWithoutHeight</span> <span class="p">=</span> <span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">;</span>
            <span class="n">posWithoutHeight</span><span class="p">.</span><span class="n">y</span> <span class="p">=</span> <span class="n">target</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
            <span class="n">Vector3</span> <span class="n">targetDirection</span> <span class="p">=</span> <span class="p">(</span><span class="n">target</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">-</span> <span class="n">posWithoutHeight</span><span class="p">);</span>

            <span class="c1">// calculate the velocity
</span>            <span class="n">interpVel</span> <span class="p">=</span> <span class="n">targetDirection</span><span class="p">.</span><span class="n">magnitude</span> <span class="p">*</span> <span class="n">dampTime</span><span class="p">;</span>

            <span class="n">destinationPosition</span> <span class="p">=</span> <span class="n">target</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">+</span> <span class="p">(</span><span class="n">targetDirection</span><span class="p">.</span><span class="n">normalized</span> <span class="p">*</span> <span class="n">interpVel</span> <span class="p">*</span> <span class="n">Time</span><span class="p">.</span><span class="n">deltaTime</span><span class="p">);</span>

            <span class="n">Vector3</span> <span class="n">newPos</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="nf">Lerp</span><span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">,</span> <span class="n">destinationPosition</span> <span class="p">+</span> <span class="n">offset</span><span class="p">,</span> <span class="m">0.25f</span><span class="p">);</span>
            <span class="n">newPos</span><span class="p">.</span><span class="n">y</span> <span class="p">=</span> <span class="n">cameraHeight</span><span class="p">;</span>
            <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">newPos</span><span class="p">;</span>

        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure> <p><img src="http://localhost:4000/images/posts/radar/movement-min.png" alt="followCameraSettings" /></p> <hr /> <h2 id="3-radar-ui">3. Radar UI</h2> <p>With the camera all setup we need to tell our camera to render to a texture in order to use it as part of the UI. <strong>In your project window Create&gt; Render texture.</strong> Assign this newly created render texture to your <strong>radar camera’s target texture</strong>.</p> <p><img src="http://localhost:4000/images/posts/radar/7_render_texture-min.png" alt="renderTexture" /></p> <p>To display the texture we will be using unity’s UI system. <strong>In your hierarchy window&gt;UI&gt; Raw image.</strong> This will automatically create a Canvas for you. <strong>Change the raw Image texture to the newly created render texture.</strong></p> <p><img src="http://localhost:4000/images/posts/radar/8_display-min.png" alt="displayTexture" /></p> <p>You should now see your texture on screen. Position it to your liking.</p> <p><img src="http://localhost:4000/images/posts/radar/9_radar_result-min.png" alt="radarResult" /></p> <p>Now to make it look more like a radar, let’s give it a background. While selecting your canvas in your hierarchy right click and select <strong>ui&gt;Image</strong>. Change the source image of the image to your radar background and move it into position.</p> <p><img src="http://localhost:4000/images/posts/radar/10_radar_bg-min.png" alt="radarBgSettings" /></p> <p><img src="http://localhost:4000/images/posts/radar/11_radar_bg_result-min.png" alt="radarbackground" /></p> <blockquote> <p>Wait a minute, my radar background is covering my radar icons</p> </blockquote> <p>Unity’s UI system renders items from top to bottom of the hierarchy, meaning items at the bottom of the hierarchy will be rendered above items at the top of your hierarchy.<strong>So make your image texture a child of your background</strong>.</p> <p><img src="http://localhost:4000/images/posts/radar/12_heirachy-order-min.png" alt="fixedRadarBackground" /></p> <p>You’ll notice that some of the icons appear outside the radar circle. Select your radar background and <strong>add a mask component</strong>. This will mask out any of its children where it is not visible.</p> <p><img src="http://localhost:4000/images/posts/radar/13_mask-min.png" alt="maskedRadar" /></p> <h3 id="voila-you-now-have-a-simple-radar-system">Voila! You now have a simple radar system.</h3> <p><img src="http://localhost:4000/images/posts/radar/result-min.jpg" alt="result" /></p> <br> <a href="https://twitter.com/intent/tweet?text=http://localhost:4000/dev-log-radar-tut/" class="btn btn_twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a> <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/dev-log-radar-tut/" class="btn btn_facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a> <a href="https://plus.google.com/share?url=http://localhost:4000/dev-log-radar-tut/" class="btn btn_google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a> </div> </div> <!-- JS --> <script src="http://localhost:4000/assets/js/main.min.js"></script> <!-- Asynchronous Google Analytics snippet --> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-96908196-1', 'auto'); ga('require', 'linkid', 'linkid.js'); ga('send', 'pageview'); </script> <div class="overlay"> <ul class="projects-menu"> </ul> </div> </body> </html>
